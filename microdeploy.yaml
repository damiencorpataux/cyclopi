packages:
  base:
    files:
      - lib/microio/**
      # - [device/asset/microio.js, asset/microio.js]
      # - [device/asset/*, asset/]  # FIXME: fix & merge branch release-0.0.2 of microdeploy
    ignore:
      - .pyc$

  sandbox_ble:
    files:
      - [sandbox/bluetooth-javascript/main-peripheral-aioble.py, main.py]
      - [sandbox/bluetooth-javascript/aioble/__init__.py, aioble/__init__.py]
      - [sandbox/bluetooth-javascript/aioble/central.py, aioble/central.py]
      - [sandbox/bluetooth-javascript/aioble/client.py, aioble/client.py]
      - [sandbox/bluetooth-javascript/aioble/core.py, aioble/core.py]
      - [sandbox/bluetooth-javascript/aioble/device.py, aioble/device.py]
      - [sandbox/bluetooth-javascript/aioble/l2cap.py, aioble/l2cap.py]
      - [sandbox/bluetooth-javascript/aioble/peripheral.py, aioble/peripheral.py]
      - [sandbox/bluetooth-javascript/aioble/security.py, aioble/security.py]
      - [sandbox/bluetooth-javascript/aioble/server.py, aioble/server.py]
    mpy:
      true

  sandbox_accelerometer:
    files:
      - [sandbox/accelerometer-viewer/main.py, main.py]
      - [sandbox/accelerometer-viewer/config.py, config.py]
      - [sandbox/accelerometer-viewer/index.html, index.html]
      - [sandbox/accelerometer-viewer/lis3dh.py, lis3dh.py]
      - [sandbox/accelerometer-viewer/aioweb.py, aioweb.py]
    mpy:
      true

  headlights:
    files:
      - [cyclopi/headlights.py, main.py]
      - [cyclopi/config.py, config.py]
      - [cyclopi/headlights.html, headlights.html]
      - [lib/lis3dh.py, lib/lis3dh.py]
    include:
      - base
    # mpy: ['-march=xtensawin'] #, '-X', 'emit=native']
    mpy:
      true

## FIXME: TODO: implement this in microdeploy ?
# packages_templated:  # usage: push device:<name>  - eg. `microdeploy package push device:historifrise`
#   device:
#     template: base
#     named:
#       files:
#         - [device/{name}.py, main.py]

device:
  port: /dev/ttyUSB0
  # baudrate: 115200
